@import models.domain.DataSourceDescription

@(dataSourceDescriptions: List[DataSourceDescription])(implicit request: RequestHeader, messages: Messages)


@mainNew("Dona - ForMe")(){
    <div class="bg-white mt-4 text-center">
        <h2 class="headline">@messages("instructions.about.title")</h2>
        <p class="paragraph serif-text">@Html(messages("instructions.about.body_html"))</p>
        <div id="accordion" align="center">
        @for(description <- dataSourceDescriptions) {
            @getDataPanel(description)
        }
        </div>
        <p class="paragraph">@messages("instructions.continue.body")</p>
    </div>
    <div class="modal fade" id="consent-dialog"  role="dialog">
    @consent()
    </div>
    <div class="mt-5">
    @footer(title = Some(messages("footer.title")), previousLink = Some("/")){
        <button class="btn btn-outline footer-forward-button-margin text-center" data-toggle="modal" data-target="#consent-dialog">@messages("links.donate")</button>
    }
    </div>
} {
}{
    @headerButtons()
}

@getDataPanel(dataSourceDescription:DataSourceDescription) = {
    <div class="card">
        <div class="card-header" id="@{dataSourceDescription.name.toString}Header">
            <button class="btn btn-link"
            data-toggle="collapse"
            data-target="#@{dataSourceDescription.name.toString}Panel"
            aria-expanded="true"
            aria-controls="@{dataSourceDescription.name.toString}Panel">
                <div class="">
                    @if(dataSourceDescription.logo.isDefined){
                        <img class="logo mr-3" src="@routes.Assets.at(s"images/dataSourceImages/${dataSourceDescription.logo.get}")">
                    }
                    <span>@{String.format(messages("instructions.datasource.title_format"), dataSourceDescription.name)}</span>
                </div>
            </button>
        </div>


        <div id="@{dataSourceDescription.name.toString}Panel" class="collapse serif-text" aria-labelledby="@{dataSourceDescription.name.toString}Header" data-parent="#accordion">
            <div class="card-body d-flex flex-column lg-w-50">
                <div>
                    <h4 class="serif-text" align="center">
                    @Html(messages("facebook.instructions.p1.title"))
                    </h4>
                    <p class="serif-text" align="left">
                    @Html(messages("facebook.instructions.p1.body"))
                    </p>
                    <h4 class="serif-text mt-4" align="center">
                    @Html(messages("facebook.instructions.p2.title"))
                    </h4>
                    <p class="serif-text" align="left">
                    @Html(messages("facebook.instructions.p2.body"))
                    </p>
                    <h4 class="serif-text mt-4" align="center">
                    @Html(messages("facebook.instructions.p3.title"))
                    </h4>
                    <p class="serif-text" align="left">
                    @Html(messages("facebook.instructions.p3.body"))
                    </p>

                    @if(dataSourceDescription.illustration.isDefined){
                        <img src="@routes.Assets.at(s"images/dataSourceImages/${dataSourceDescription.illustration.get}")" width="400px"></img>
                    }

                    <h4 class="serif-text mt-4">
                    @messages("instructions.download-procedure.title")
                    </h4>

                    <div class="serif-text text-left mb-3">
                        <ol>
                        @for(procedureStep <- dataSourceDescription.dataDownloadSteps) {
                            <li><p>@Html(procedureStep)</p></li>
                        }
                        </ol>
                    </div>


                    <p class="serif-text">
                    @Html(dataSourceDescription.documentation)
                    </p>
                </div>
                <div class="embed-responsive embed-responsive-16by9">
                @if(dataSourceDescription.animation.isDefined && dataSourceDescription.animation.get.source != ""){
                    <video controls height="@{dataSourceDescription.animation.get.height}" width="@{dataSourceDescription.animation.get.width}">
                        <source src="@routes.Assets.at(s"images/dataSourceImages/${dataSourceDescription.animation.get.source}")" type="video/mp4">
                    </video>
                }
                </div>

            <div>
                <h4 class="serif-text" align="center">
                @messages("instructions.download-procedure.title")
                </h4>

                <div class="serif-text text-left mb-3">
                    <ol>
                    @for(procedureStep <- dataSourceDescription.dataDownloadSteps) {
                        <li><p>@Html(procedureStep)</p></li>
                    }
                    </ol>
                </div>

                <p class="serif-text">
                @Html(dataSourceDescription.documentation)
                </p>
            </div>
        </div>
    </div>
}